{% macro collapsible_path_card(path_list, card_header, card_id, table_headers=[], table_id=None) -%}
  <div class="card" id="{{ card_id }}">
    <div class="card-header">
      <h4 class="my-0 font-weight-normal">
        <a href="#"
           class="stmt_toggle"
           data-toggle="collapse"
           aria-expanded="true"
           data-target="#{{ card_id }}_body"
           aria-controls="{{ card_id }}_body">
          {{ card_header }}
        </a>
      </h4>
    </div>
    <div class="collapse" id="{{ card_id }}_body">
      <div class="card-body">
        {{ path_table(path_list, table_headers, table_id) }}
      </div>
    </div>
  </div>
{%- endmacro %}

{% macro path_card(path_list, card_header, card_id, table_headers=[], table_id=None, full_path=false) -%}
  <div class="card" id="{{ card_id }}">
    <div class="card-header">
      <h4 class="my-0 font-weight-normal">{{ card_header }}</h4>
    </div>
    <div class="card-body">
      {{ path_table(path_list, table_headers, table_id, full_path) }}
    </div>
  </div>
{%- endmacro %}

{% macro path_table(path_list, headers=[], id=None, full_path=false) -%}
<table class="table">
  {% if headers %}
  <thead class="table-head">
  {% for header in headers %}
  {% if "Test" in headers %}
    <th {% if header != "Test" and not full_path %}style="width: 15%; text-align: center"{% endif %}>{{ header }}</th>
  {% else %}
    <th>{{ header }}</th>
  {% endif %}
  {% endfor %}
  </thead>
  {% endif %}
  <tbody class="table-body" {% if id %}id="{{ id }}"{% endif %}>
    {% if full_path %}
      {{ full_path_table_contents(path_list) }}
    {% else %}
      {{ path_table_contents(path_list) }}
    {% endif %} 
  </tbody>
</table>
{%- endmacro %}

{% macro path_table_contents(paths) -%}
  {% for row in paths %}
  <tr>
  {% for link_address, link_text in row %}
    {% if link_address %}
      <td><a href="{{ link_address }}" class="stmt-dblink" target="_blank">{{ link_text }}</a></td>
{# Pass: <i class="fas fa-check"></i>#}
{# Fail: <i class="fas fa-times"></i>#}
{# See more at:#}
{# https://fontawesome.com/icons?d=gallery#}
    {% elif link_text == 'Pass' %}
      <td style="text-align: center"><i class="fas fa-check"></i></td>
    {% elif link_text == 'Fail' %}
      <td style="text-align: center"><i class="fas fa-times"></i></td>
    {% else %}
      <td>{{ link_text }}</td>
    {% endif %}
  {% endfor %}
  </tr>
  {% endfor %}
{%- endmacro %}

{% macro full_path_table_contents(paths) -%}
  {% for row in paths %}
  <tr>
    {% for res_list in row %}
      {% if loop.length == 1 %}
        <td colspan="2" style="text-align:center; font-weight: bold;">
      {%else %}
        <td>
      {% endif %}
      {% for link_address, link_text in res_list %}
        {% if link_address %}
          <a href="{{ link_address }}" class="stmt-dblink" target="_blank">{{ link_text }}</a>
        {% else %}
          {{ link_text }}
        {% endif %}
        {% if not loop.last %}
          <br>
        {% endif %}
      {% endfor %}
    </td>
    {% endfor %}
  </tr>
  {% endfor %}
{%- endmacro %}